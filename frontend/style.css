:root {
  /* PALETTE BASED ON YOUR IMAGE */
  --bg-gradient: linear-gradient(135deg, #e3e3f5 0%, #e8e6f5 100%); /* Soft Lavender */
  --bg-solid: #e3e3f5;
  
  --panel: #ffffff;
  --accent: #1f2029; /* Dark Navy/Black from the "Login" button */
  --accent-text: #ffffff;
  
  /* Chat Bubbles */
  --bubble-self: #1f2029; /* Matching the Login button for high contrast */
  --bubble-self-text: #ffffff;
  
  --bubble-other: #ffffff;
  --bubble-other-text: #1f2029;
  
  --muted: #8c8c9e; /* Soft grey text */
  --notice-bg: rgba(31, 32, 41, 0.05);
  
  /* UI Tweaks */
  --shadow-soft: 0 8px 24px rgba(149, 157, 165, 0.1);
  --radius-xl: 24px;
  --radius-md: 16px;
}

/* DARK THEME (Complementary Deep Purple/Navy) */
:root[data-theme="dark"] {
  --bg-gradient: linear-gradient(135deg, #0f0f13 0%, #181820 100%);
  --bg-solid: #0f0f13;
  
  --panel: #1a1b26;
  --accent: #7c73e6; /* A pop of purple for dark mode */
  --accent-text: #ffffff;
  
  --bubble-self: #7c73e6;
  --bubble-self-text: #ffffff;
  
  --bubble-other: #242533;
  --bubble-other-text: #e0e0e0;
  
  --muted: #888;
  --notice-bg: rgba(255, 255, 255, 0.05);
  --shadow-soft: 0 4px 12px rgba(0,0,0,0.3);
}

* {
  box-sizing: border-box;
  font-family: 'Poppins', system-ui, Arial, sans-serif;
}

body {
  margin: 0;
  height: 100vh;
  display: flex;
  flex-direction: column;
  background: var(--bg-solid);
  background: var(--bg-gradient); /* Uses gradient if supported */
  color: var(--muted);
}

/* TOPBAR - Made cleaner (White) to match the "Market" screen style */
.topbar {
  height: 70px;
  background: var(--panel);
  color: var(--accent); /* Dark text on white header */
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);
  z-index: 10;
}

.topbar .brand {
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo {
  height: 40px;
  border-radius: 10px;
}

.topbar h1 {
  font-size: 20px;
  margin: 0;
  font-weight: 700;
  color: var(--accent);
}

.icon-btn {
  background: transparent;
  border: 0;
  color: var(--muted);
  font-size: 20px;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  transition: 0.2s;
}

.icon-btn:hover {
  background: var(--notice-bg);
  color: var(--accent);
}

.online-count {
  margin-left: 8px;
  background: #dcfce7; /* Soft Green accent like the "Trending" icon */
  color: #166534;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
}

/* LAYOUT */
.chat-layout {
  flex: 1;
  display: flex;
  gap: 20px;
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;
}

/* SIDEBAR - Clean white card style */
.sidebar {
  width: 260px;
  background: var(--panel);
  border-radius: var(--radius-xl);
  padding: 20px;
  box-shadow: var(--shadow-soft);
  overflow: auto;
  border: 1px solid rgba(255,255,255,0.5);
}

.sidebar h3 {
  margin: 0 0 16px 0;
  color: var(--accent);
  font-size: 16px;
}

.users-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.users-list li {
  padding: 12px;
  border-radius: var(--radius-md);
  margin-bottom: 8px;
  background: transparent;
  font-size: 14px;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 10px;
  transition: 0.2s;
  cursor: pointer;
}

.users-list li:hover {
  background: var(--notice-bg);
  color: var(--accent);
}

/* CHAT PANEL */
.chat-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100%;
  position: relative;
}

.container {
  flex: 1;
  padding: 20px;
  /* Removed border/shadow from container to let bubbles float on the gradient background 
     OR keeps them contained if you prefer. I've set it to transparent for a cleaner look. */
  background: transparent; 
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

/* MESSAGE WRAPPERS */
.message-wrap {
  margin: 12px 0;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.notice {
  align-self: center;
  background: rgba(0,0,0,0.03);
  padding: 6px 16px;
  border-radius: 20px;
  text-align: center;
  color: var(--muted);
  font-size: 12px;
  margin: 16px 0;
}

/* BUBBLES */
.message {
  max-width: 70%;
  padding: 14px 18px;
  border-radius: 18px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
  animation: pop 300ms cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Bouncy animation */
  position: relative;
}

/* SELF Bubble (Right) - High Contrast Dark */
.right {
  align-self: flex-end;
  background: var(--bubble-self);
  color: var(--bubble-self-text);
  border-bottom-right-radius: 4px; /* Subtle corner accent */
}

/* OTHER Bubble (Left) - Clean White */
.left {
  align-self: flex-start;
  background: var(--bubble-other);
  color: var(--bubble-other-text);
  border-bottom-left-radius: 4px;
}

/* Message Content Styling */
.msg-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
  font-size: 11px;
  opacity: 0.7; /* Make metadata subtle */
}

.msg-body {
  font-size: 15px;
  line-height: 1.5;
  word-break: break-word;
}

.right .msg-head { color: rgba(255,255,255,0.8); }
.left .msg-head { color: var(--muted); }

.time {
  font-size: 10px;
  margin-left: 8px;
  opacity: 0.7;
}

/* TYPING INDICATOR */
.typing-indicator {
  padding: 8px 24px;
  color: var(--muted);
  font-size: 13px;
  font-style: italic;
  opacity: 0.8;
}

/* INPUT AREA - Floating Pill Style */
.send {
  padding: 16px 0;
  display: flex;
  justify-content: center;
}

#send-container {
  width: 100%;
  display: flex;
  gap: 12px;
  align-items: center;
  background: var(--panel);
  padding: 8px;
  border-radius: 50px; /* Fully rounded pill */
  box-shadow: var(--shadow-soft);
}

#messageInp {
  flex: 1;
  padding: 12px 20px;
  border-radius: 30px;
  border: none;
  outline: none;
  font-size: 15px;
  background: transparent;
  color: var(--bubble-other-text);
}

.btn {
  padding: 12px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--accent);
  border: 0;
  color: var(--accent-text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s;
}

.btn:hover {
  transform: scale(1.05);
}

/* SCROLLBAR STYLING (For Webkit) */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.1); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.2); }

/* RESPONSIVE */
@media (max-width: 800px) {
  .sidebar { display: none; }
  .chat-layout { padding: 10px; gap: 0; }
  .container { padding: 10px; }
  .message { max-width: 80%; }
}

/* ANIMATION */
@keyframes pop {
  from { transform: scale(0.95) translateY(10px); opacity: 0; }
  to { transform: none; opacity: 1; }
}